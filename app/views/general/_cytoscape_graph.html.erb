<%= stylesheet_link_tag 'cytoscape_isa_graph' %>
<%= javascript_include_tag 'cytoscape_isa_graph' %>

<div class="row">
  <div class="hidden-xs">
    <div class="isa_graph box_about_actor curved with_smaller_shadow">
      <div id="node_info"></div>
      <div class="isa-wrapper">
        <div id="cy"></div>
        <%= render partial: 'general/jstree', locals: { hash: hash } %>
      </div>
    </div>

    <span id="ruler" style="visibility: hidden"></span>
  </div>
</div>

<script type="text/javascript">
  var isaGraph = $j('.isa_graph')[0];
  var elements = <%= elements.to_json.html_safe %>;
  var originElementId = '<%= node_id(root_item) -%>';

  if (elements.error === 'error') {
    isaGraph.innerHTML = "<div class='none_text'>Currently unable to display the graph for this item</div>";
    isaGraph.style['text-align'] = 'center';
  }
  else if (!isCanvasSupportBrowser() || !isIEVersionSupported(5)) {
    isaGraph.innerHTML = "<div class='none_text'>Unable to display the graph for this browser version. Please upgrade your browser.</div>";
    isaGraph.style['text-align'] = 'center';
  } else {
    ISA.decodeHTMLForElements(elements);
    ISA.drawGraph(elements, originElementId);
  }
</script>
