<%= stylesheet_link_tag 'cytoscape_isa_graph' %>
<%= javascript_include_tag 'cytoscape_isa_graph' %>

<%
  hash =  Seek::SampleGraphGenerator.new(sample).generate
  elements = cytoscape_elements(hash)
%>

<div class="row">

  <div class="hidden-xs">
    <div class="col-md-12 col-sm-12 isa_graph box_about_actor curved with_smaller_shadow">
      <div class="row">
        <div class="alert alert-info" role="alert" id="node_info"></div>
        <div id="cy"></div>
      </div>
    </div>

    <span id="ruler" style="visibility: hidden"></span>
  </div>
</div>

<script type="text/javascript">
    var isa_graph = $j('.isa_graph')[0];
    var elements = <%= elements.to_json.html_safe %>;
    var current_element_id = '<%= node_id(sample) -%>';

    if (elements.error === 'error') {
        isa_graph.innerHTML = "<div class='none_text'>Currently unable to display the graph for this item</div>";
        isa_graph.style['text-align'] = 'center';
    }
    else if (!isCanvasSupportBrowser() || !isIEVersionSupported(5)) {
        isa_graph.innerHTML = "<div class='none_text'>Unable to display the graph for this browser version. Please upgrade your browser.</div>";
        isa_graph.style['text-align'] = 'center';
    } else {
        decodeHTMLForElements(elements);
        drawGraph(elements, current_element_id);
    }
</script>
