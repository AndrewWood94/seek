<%= stylesheet_link_tag "publishing" %>
<%= javascript_include_tag "publishing" %>

<div class="show_basic">
  <h1>Batch publishing preview.</h1>

  <%= render :partial => "assets/publishing/publishing_guide" -%>
  <br/>

  <% form_tag :action => :publish do -%>
      <% if @assets.empty? %>
          <span class="no_unpublished_asset">All your assets are published or you have no assets in <%= Seek::Config.project_name %></span>
      <% else %>
          <% @assets.sort_by { |k, v| v.first.class.name }.each do |type, items| %>
                <h2><%= text_for_resource items.first %>(s)</h2>
                <% items.each do |item| %>
                   <%= render :partial => "assets/publishing/asset_and_related", :object => item -%>
                <% end %>
          <% end %>
          <br/>          
          <%= submit_tag "Submit", :id=>'submit_publishing', :onclick => "clickLink($('waiting_approval_list'));return(false);" -%>
          Or
          <%= link_to "Cancel", person_path(params[:id].to_i)-%>
          <%= link_to_remote_redbox("waiting approval list",
                                    {:url => url_for(:action => "waiting_approval_list"), :failure => "alert('Sorry, an error has occurred.'); RedBox.close();",
                                     :with => "'publish=' + getPublishParams()"},
                                    {:id => "waiting_approval_list", :style => "display:none"})-%>
      <% end -%>
  <% end -%>

</div>

