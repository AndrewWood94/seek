<%= javascript_include_tag "publishing" %>

  <% form_tag({:action => :publish}, :method=>:post,:id=>'publishing_form', :style=>'display:inline') do -%>
    <%= check_box_tag publishing_item_param(asset),1,true,{:style=>'display:none;',:class=>"checkbox_element"} %>
    <%= image_tag_for_key 'publish', "checkRelatedItems(asset)", nil, {}, "Publish #{text_for_resource(asset)}", :function -%>
<% end %>

<%= link_to_remote_redbox("waiting approval list",
                          {:url => url_for(:action => "waiting_approval_list"), :failure => "alert('Sorry, an error has occurred.'); RedBox.close();",
                           :with => "'publish=' + getJsonPublishParams()"},
                          {:id => "waiting_approval_list", :style => "display:none"})-%>


<script type="text/javascript">
  var asset = [];
  asset.push(['<%= asset.class.name%>','<%= asset.id%>','<%= !asset.assays.empty? %>','<%= asset.gatekeeper_required? && !current_user.person.is_gatekeeper_of?(asset)%>']);
</script>
