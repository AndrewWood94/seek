<%
   image_filename = icon_filename_for_key('destroy')

   image_options = { :alt => 'Delete' }
   img_tag = image_tag(image_filename, image_options).html_safe

   delete_tag = "#{img_tag} Delete sweep".html_safe
   cancel_tag = "#{img_tag} Cancel sweep".html_safe
%>

<div id="buttons">
  <ul class="sectionIcons">
    <% if sweep.can_manage? -%>
        <li><%= image_tag_for_key('manage', edit_sweep_path(sweep), nil, nil, "Manage sweep") -%></li>
    <% end -%>
    <% if sweep.can_delete? -%>
        <% if sweep.complete? %>
            <li>
              <!-- Delete sweep button -->
              <%= link_to ('<span class="icon">' + delete_tag + '</span>').html_safe, sweep_path(sweep), :method => :delete, :data => { confirm: 'Are you sure?' } -%>
            </li>
        <% else %>
            <!-- Cancel sweep button -->
            <li>
              <%= link_to ('<span class="icon">' + cancel_tag + '</span>').html_safe, cancel_sweep_path(sweep, :redirect_url => sweep_path(sweep)), :method => :put, :data => { confirm: 'Are you sure?' } -%>
            </li>
        <% end %>
    <% end %>
  </ul>
</div>