<subProcess id="assay-<%= assay.id %>" name="<%= assay.title %>">

<% link_start = "assay-#{assay.id}-start" %>
<startEvent id="<%= link_start %>"/>

<% start_sentry = "assay-#{assay.id}-start-sentry" %>

  <%= render :partial => "bpmn/start_sentry",
      	     :locals => {:id => start_sentry,
	     	     	 :name => "#{assay.title} Start Sentry",
			 :pisa_assignee => "alan.r.williams@manchester.ac.uk",
			 :pisa_type => "Assay",
			 :pisa_name => "#{assay.title}",
			 :pisa_description => "#{assay.description}",
			 :pisa_protocol => "",
			 :pisa_url => "#{ Seek::Config.site_base_host}#{polymorphic_path(assay)}" } -%>

  <sequenceFlow sourceRef="<%= link_start %>" targetRef="<%= start_sentry %>" id="<%= link_start %>-to-<%= start_sentry %>"/>

<% link_start = start_sentry %>

<% link_end="assay-#{assay.id}-end" %>
<endEvent id="<%=link_end %>"/>

<sequenceFlow sourceRef="<%= link_start %>" targetRef="<%= link_end %>" id="<%= link_start %>-to-<%= link_end %>"/>

</subProcess>
